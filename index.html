<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>JsonLogic by jwadhams</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>JsonLogic</h1>
        <h2>Build complex rules and serialize them to JSON</h2>
        <a href="https://github.com/jwadhams/json-logic" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="json-logic-js" class="anchor" href="#json-logic-js" aria-hidden="true"><span class="octicon octicon-link"></span></a>json-logic-js</h1>

<p>The goal of this format is to share complex logical expressions between front-end and back-end code.</p>

<p>The same format can be executed:</p>

<ul>
<li>in JavaScript by the library <a href="https://github.com/jwadhams/json-logic-js/">json-logic-js</a>
</li>
<li>in PHP by the library <a href="https://github.com/jwadhams/json-logic-php/">json-logic-php</a>
</li>
</ul>

<h2>
<a id="virtues" class="anchor" href="#virtues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Virtues</h2>

<ol>
<li><strong>Terse.</strong></li>
<li>
<strong>Consistent.</strong> <code>{"operator" : ["values" ... ]}</code>  Always.</li>
<li>
<strong>Secure.</strong> We never <code>eval()</code>. Rules only have access to data you provide.</li>
<li>
<strong>Flexible.</strong> Most operands are 1 line of code.</li>
</ol>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<h3>
<a id="simple" class="anchor" href="#simple" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple</h3>

<div class="highlight highlight-source-js"><pre>jsonLogic( { <span class="pl-s"><span class="pl-pds">"</span>==<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [<span class="pl-c1">1</span>, <span class="pl-c1">1</span>] } );
<span class="pl-c">// true</span></pre></div>

<p>This is a simple test, equivalent to <code>1 == 1</code>.  A few things about the format:</p>

<ol>
<li>The operator is always in the "key" position. There is only one key per JsonLogic rule.</li>
<li>The values are typically an array.</li>
<li>Each value can be a string, number, boolean, array (non-associative), or null</li>
</ol>

<h3>
<a id="compound" class="anchor" href="#compound" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compound</h3>

<p>Here we're beginning to nest rules. </p>

<div class="highlight highlight-source-js"><pre>jsonLogic(
    {<span class="pl-s"><span class="pl-pds">"</span>and<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [
      { <span class="pl-s"><span class="pl-pds">"</span>&gt;<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [<span class="pl-c1">3</span>,<span class="pl-c1">1</span>] },
      { <span class="pl-s"><span class="pl-pds">"</span>&lt;<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [<span class="pl-c1">1</span>,<span class="pl-c1">3</span>] }
    ] }
);
<span class="pl-c">// true</span></pre></div>

<p>In an infix language (like JavaScript) this could be written as:</p>

<div class="highlight highlight-source-js"><pre>( (<span class="pl-c1">3</span> <span class="pl-k">&gt;</span> <span class="pl-c1">1</span>) <span class="pl-k">&amp;&amp;</span> (<span class="pl-c1">1</span> <span class="pl-k">&lt;</span> <span class="pl-c1">3</span>) )</pre></div>

<h3>
<a id="data-driven" class="anchor" href="#data-driven" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data-Driven</h3>

<p>Obviously these rules aren't very interesting if they can only take static literal data. Typically <code>jsonLogic</code> will be called with a rule object and a data object. You can use the <code>var</code> operator to get attributes of the data object:</p>

<div class="highlight highlight-source-js"><pre>jsonLogic(
    { <span class="pl-s"><span class="pl-pds">"</span>var<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>] }, <span class="pl-c">// Rule</span>
    { a <span class="pl-k">:</span> <span class="pl-c1">1</span>, b <span class="pl-k">:</span> <span class="pl-c1">2</span> }   <span class="pl-c">// Data</span>
);
<span class="pl-c">// 1</span></pre></div>

<p>If you like, we support <a href="https://en.wikipedia.org/wiki/Syntactic_sugar">syntactic sugar</a> on unary operators to skip the array around values:</p>

<div class="highlight highlight-source-js"><pre>jsonLogic(
    { <span class="pl-s"><span class="pl-pds">"</span>var<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> },
    { a <span class="pl-k">:</span> <span class="pl-c1">1</span>, b <span class="pl-k">:</span> <span class="pl-c1">2</span> }
);
<span class="pl-c">// 1</span></pre></div>

<p>You can also use the <code>var</code> operator to access an array by numeric index:</p>

<div class="highlight highlight-source-js"><pre>jsonLogic(
    {<span class="pl-s"><span class="pl-pds">"</span>var<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">1</span> },
    [ <span class="pl-s"><span class="pl-pds">"</span>apple<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>banana<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>carrot<span class="pl-pds">"</span></span> ]
);
<span class="pl-c">// "banana"</span></pre></div>

<p>Here's a complex rule that mixes literals and data. The pie isn't ready to eat unless it's cooler than 110 degrees, <em>and</em> filled with apples.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> rules <span class="pl-k">=</span> { <span class="pl-s"><span class="pl-pds">"</span>and<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [
  {<span class="pl-s"><span class="pl-pds">"</span>&lt;<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [ { <span class="pl-s"><span class="pl-pds">"</span>var<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>temp<span class="pl-pds">"</span></span> }, <span class="pl-c1">110</span> ]},
  {<span class="pl-s"><span class="pl-pds">"</span>==<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [ { <span class="pl-s"><span class="pl-pds">"</span>var<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>pie.filling<span class="pl-pds">"</span></span> }, <span class="pl-s"><span class="pl-pds">"</span>apple<span class="pl-pds">"</span></span> ] }
] };

<span class="pl-k">var</span> data <span class="pl-k">=</span> { <span class="pl-s"><span class="pl-pds">"</span>temp<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">100</span>, <span class="pl-s"><span class="pl-pds">"</span>pie<span class="pl-pds">"</span></span> <span class="pl-k">:</span> { <span class="pl-s"><span class="pl-pds">"</span>filling<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>apple<span class="pl-pds">"</span></span> } };

jsonLogic(rules, data);
<span class="pl-c">// true</span></pre></div>

<h3>
<a id="always-and-never" class="anchor" href="#always-and-never" aria-hidden="true"><span class="octicon octicon-link"></span></a>Always and Never</h3>

<p>Sometimes the rule you want to process is "Always" or "Never."  If the first parameter passed to <code>jsonLogic</code> is a non-object, non-associative-array, it is returned immediately.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//Always</span>
jsonLogic(<span class="pl-c1">true</span>, data_will_be_ignored);
<span class="pl-c">// true</span>

<span class="pl-c">//Never</span>
jsonLogic(<span class="pl-c1">false</span>, i_wasnt_even_supposed_to_be_here);
<span class="pl-c">// false</span></pre></div>

<h2>
<a id="supported-operations" class="anchor" href="#supported-operations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported Operations</h2>

<ul>
<li>
<code>==</code> </li>
<li>
<code>===</code> </li>
<li><code>!=</code></li>
<li><code>!==</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
<li>
<code>!</code> - Unary negation</li>
<li><code>and</code></li>
<li><code>or</code></li>
<li>
<code>?:</code> - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">ternary</a>, like <code>a ? b : c;</code>
</li>
<li>
<code>in</code> - Value in array (e.g., <code>{"in":[ "Ringo", ["John", "Paul", "George", "Ringo"] ]}</code>) 

<ul>
<li>
<em>or</em> substring in string (e.g., <code>{"in":["Spring", "Springfield"]}</code>)</li>
</ul>
</li>
<li>
<code>var</code> - Retrieve data from the provided data object</li>
<li>
<code>log</code> - Logs the first value to console, then passes it through unmodified.</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/jwadhams/json-logic/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/jwadhams/json-logic/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/jwadhams/json-logic"></a> is maintained by <a href="https://github.com/jwadhams">jwadhams</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
